#########
## Configured by Ansible
#########

# Loopback interface
auto lo
iface lo inet loopback
  address 10.1.1.3/32
  vxrd-src-ip 10.1.1.3
  vxrd-svcnode-ip 10.255.255.10
  alias loopback interface

# Management interface
auto eth0
iface eth0 inet dhcp
  alias management interface

# Port to Server03
auto swp1
iface swp1
  alias to Server03
  # This is required for Vagrant only
  post-up ip link set swp1 promisc on

# Port to Server04
auto swp2
iface swp2
  alias to Server04
  # This is required for Vagrant only
  post-up ip link set swp2 promisc on

# Port to Spine01
auto swp51
iface swp51
  alias to Spine01

# Port to Spine02
auto swp52
iface swp52
  alias to Spine02

# Bond to Server03
auto bond03
iface bond03
  bond-slaves swp1
  bridge-access 13
  clag-id 3

# Bond to Server04
auto bond04
iface bond04
  bond-slaves swp2
  bridge-access 24
  clag-id 4

# Define the bridge for STP
auto bridge
iface bridge
  bridge-vlan-aware yes
  # bridge-ports includes all ports related to VxLAN and CLAG.
  # does not include the Peerlink.4094 subinterface
  bridge-ports bond03 bond04 vni13 vni24
  bridge-vids 13 24
  bridge-pvid 1

# VxLAN Tunnel for Server1-Server3 (Vlan 13)
auto vni13
iface vni13
  vxlan-id 13
  vxlan-local-tunnelip 10.1.1.3

#VxLAN Tunnel for Server2-Server4 (Vlan 24)
auto vni24
iface vni24
  vxlan-id 24
  vxlan-local-tunnelip 10.1.1.3
